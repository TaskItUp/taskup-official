<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>TaskUp — Profile & Referrals</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>
<body>
  <div class="container">
    <div id="profile" class="card">
      <div class="profile-header">
        <img id="profile-pic" class="profile-pic-large" src="https://i.pravatar.cc/150" alt="User">
        <h3 id="profile-name">User</h3>
        <p id="telegram-username" class="muted">@username</p>
        <p class="profile-balance">Balance: <strong><span id="profile-balance">0</span> PEPE</strong></p>
      </div>

      <div class="profile-stats">
        <div class="stat-item"><div>Earned So Far</div><div class="stat-value"><span id="earned-so-far">0</span> PEPE</div></div>
        <div class="stat-item"><div>Total Ads Viewed</div><div class="stat-value" id="total-ads-viewed">0</div></div>
        <div class="stat-item"><div>Total Referrals</div><div class="stat-value" id="total-refers">0</div></div>
        <div class="stat-item"><div>Referral Earnings</div><div class="stat-value" id="refer-earnings">0</div></div>
      </div>

      <div class="earn-test">
        <h4>Test Earnings</h4>
        <button id="earnBtn" onclick="testEarn()">+10 PEPE</button>
      </div>
    </div>
  </div>

  <button class="refer-fab" onclick="openReferModal()" title="Refer friends"><i class="fas fa-gift"></i></button>

  <div id="refer-modal" class="modal" aria-hidden="true">
    <div class="modal-content">
      <button class="close-btn" onclick="closeReferModal()">✕</button>
      <h2>Refer Friends — Earn 10%</h2>
      <p>Share this link:</p>
      <div class="referral-row">
        <input id="referral-link" readonly>
        <button onclick="copyReferralLink(this)"><i class="fas fa-copy"></i></button>
      </div>
      <p><strong><span id="refer-count">0</span></strong> referrals — <strong><span id="refer-earnings-2">0</span> PEPE</strong></p>
    </div>
  </div>

  <nav class="nav-bar" aria-label="Main">
    <a class="nav-item active"><i class="fas fa-home"></i><span>Home</span></a>
    <a class="nav-item"><i class="fas fa-coins"></i><span>Earn</span></a>
    <a class="nav-item"><i class="fas fa-wallet"></i><span>Withdraw</span></a>
    <a class="nav-item"><i class="fas fa-user"></i><span>Profile</span></a>
  </nav>

  <!-- Telegram WebApp SDK -->
  <script src="https://telegram.org/js/telegram-web-app.js"></script>

  <!-- Firebase Compat SDKs -->
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>

  <!-- Main script -->
  <script src="script.js"></script>
</body>
</html>
